(window["webpackJsonpstar-war-api"]=window["webpackJsonpstar-war-api"]||[]).push([[0],{30:function(e,t,a){e.exports=a(42)},39:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(9),s=a.n(r),o=a(10),c=(a(39),a(28)),i=a(8),u=(a(40),a(20)),m="LOGOUT_USER";var d,p=Object(o.b)((function(e){return{}}),(function(e){return{loginUser:function(t){e(function(e){return{type:"LOGIN_USER",user:e}}(t))}}}))((function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),r=a[0],s=a[1],o=Object(n.useState)(""),c=Object(u.a)(o,2),i=c[0],m=c[1],d=Object(n.useState)(""),p=Object(u.a)(d,2),h=p[0],E=p[1];return l.a.createElement("div",{className:"login-page"},l.a.createElement("div",{className:"login-form"},l.a.createElement("h1",null,"Login"),l.a.createElement("input",{"data-test":"username",type:"email",placeholder:"Username",className:"text-input",value:r,onChange:function(e){return s(e.target.value)}}),l.a.createElement("input",{"data-test":"password",type:"password",placeholder:"Password",className:"text-input",value:i,onChange:function(e){return m(e.target.value)}}),l.a.createElement("span",{className:"error-message"},h),l.a.createElement("button",{className:"login-button",onClick:function(){E(""),s(r.trim()),m(i.trim()),r.length>0&&i.length>0?fetch("https://swapi.co/api/people?search=".concat(r)).then((function(e){return e.json()})).then((function(t){var a=t.results[0];a&&a.birth_year===i?(e.history.push("/dashboard"),e.loginUser(a)):E("Invalid credentials")})):E("Invalid credentials")}},"Login")))})),h=a(14),E=a(15),v=a(19),f=a(17),g=a(16),N=a(18),b=function(e){return l.a.createElement("span",{"data-test":"planet-population",className:"planet-population"},function(e){var t=Number(e);if(isNaN(t))return e;var a=Math.floor((""+t).length/3);return parseFloat((0!==a?t/Math.pow(1e3,a):t).toPrecision(2))+" "+["","k","m","b","t"][a]}(e.population))},w=function(e){var t=e.value,a=function(e){for(var t=20,a=300;e>1e5;)e/=100,t+=4,a+=100;return{fontSize:t,fontWeight:a}}(parseInt(t.population)),n={fontSize:a.fontSize+"px",fontWeight:a.fontWeight};return l.a.createElement("div",{className:"planet",onClick:function(){e.hasOwnProperty("onPlanetClick")&&e.onPlanetClick(t)}},l.a.createElement("span",{"data-test":"planet-title",className:"planet-title",style:n},t.name),l.a.createElement(b,{population:t.population}))},O=function(e){return s.a.createPortal(l.a.createElement("div",{className:"modal-view",onClick:function(t){"modal-view"===t.target.className&&e.onClose()}},l.a.createElement("div",{className:"modal"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("div",{className:"modal-title"},e.title),l.a.createElement("button",{className:"modal-close",onClick:e.onClose},"X")),l.a.createElement("div",{className:"modal-content"},e.children))),document.getElementById("root"))},S=function(e){var t=e.value;return l.a.createElement("div",{className:"planet-details"},l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",{className:"title"},"Climate: "),l.a.createElement("span",{"data-test":"planet-climate"},t.climate)),l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",{className:"title"},"Diameter: "),l.a.createElement("span",{"data-test":"planet-diameter"},t.diameter)),l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",{className:"title"},"Orbital Period: "),l.a.createElement("span",{"data-test":"planet-orbital-period"},t.orbital_period)),l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",{className:"title"},"Rotation Period: "),l.a.createElement("span",{"data-test":"planet-rotation-period"},t.rotation_period)),l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",{className:"title"},"Terrain: "),l.a.createElement("span",{"data-test":"planet-terrain"},t.terrain)),l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",{className:"title"},"Surface water: "),l.a.createElement("span",{"data-test":"planet-surface-water"},t.surface_water)),l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",{className:"title"},"Gravity: "),l.a.createElement("span",{"data-test":"planet-gravity"},t.gravity)))},y=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(f.a)(t).call(this,e))).onPlanetClick=function(e){a.setState({showModal:!0,selectedPlanet:e})},a.onModalClose=function(){a.setState({showModal:!1,selectedPlanet:{}})},a.state={planets:[],text:"",showModal:!1,selectedPlanet:{}},a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.planets,n=t.text,r=t.showModal,s=t.selectedPlanet,o=l.a.createElement("div",{className:"not-found no-result"},l.a.createElement("h1",null,"No results"));if(0!==a.length){var c=a.map((function(t){return l.a.createElement(w,{key:t.name,value:t,onPlanetClick:e.onPlanetClick})}));o=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"searched-for"},"Search keyword: ",l.a.createElement("span",null,n)),l.a.createElement("div",{className:"search-results"},c))}return l.a.createElement(l.a.Fragment,null,o,r?l.a.createElement(O,{title:"Details",onClose:function(){return e.onModalClose()},width:500},l.a.createElement("div",{className:"planet"},l.a.createElement(w,{value:s}),l.a.createElement(S,{value:s}))):null)}}],[{key:"getDerivedStateFromProps",value:function(e){return e}}]),t}(l.a.Component),j=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(f.a)(t).call(this,e))).onTextChange=function(e){var t=e.target.value;a.setState({text:t,loading:!0}),clearTimeout(d),d=setTimeout(function(){this.onSearch()}.bind(Object(g.a)(a)),200)},a.handleKeyPress=function(e){"Enter"===e.key&&a.onSearch()},a.onSearch=function(){var e=a.state.text;e.length>0?fetch("https://swapi.co/api/planets?search=".concat(e)).then((function(e){return e.json()})).then((function(e){var t=e.results;a.setState({planets:t,loading:!1})})):a.setState({planets:[],loading:!1})},a.state={text:"t",planets:[],loading:!1},a}return Object(N.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.onSearch()}},{key:"render",value:function(){var e=this.state,t=e.planets,a=e.loading,n=e.text,r=null;return r=a?l.a.createElement("div",{className:"not-found no-result"},l.a.createElement("h1",null,"Searching planets")):l.a.createElement(y,{planets:t,text:n}),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"search-box"},l.a.createElement("input",{className:"search-text",type:"text",value:this.state.text,placeholder:"Search here..",onKeyPress:this.handleKeyPress,onChange:this.onTextChange}),l.a.createElement("button",{className:"search-button",onClick:this.onSearch},"Search")),l.a.createElement("div",null,r))}}]),t}(l.a.Component),C=function(e){return l.a.createElement("header",{"data-test":"header-component"},l.a.createElement("h1",{"data-test":"header-title"},"Star Wars"),e.isLogin?l.a.createElement("div",{className:"options"},l.a.createElement("span",{"data-test":"username",className:"username"},e.user.name),l.a.createElement("button",{"data-test":"logout-button",className:"option-button",onClick:e.onLogout},"Logout")):null)},k=Object(o.b)((function(e){return{user:e.user,isLogin:e.isLogin}}),(function(e){return{onLogoutUser:function(){e({type:m})}}}))((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(C,Object.assign({},e,{onLogout:function(){e.history.push("/"),e.onLogoutUser()}})),l.a.createElement(j,e))})),L=function(){return l.a.createElement("div",{className:"not-found"},l.a.createElement("h1",null,"Not Found"))},P=function(){return l.a.createElement(c.a,{basename:"/star-war-api"},l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/",component:p}),l.a.createElement(i.a,{path:"/login",component:p}),l.a.createElement(i.a,{path:"/dashboard",component:k}),l.a.createElement(i.a,{component:L})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(13),x={isLogin:!1,messages:[],user:""},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":var a=e.isLogin;a=!a;var n=t.user;return Object.assign({},e,{user:n,isLogin:a});case m:var l=e.isLogin,r=e.userName;return l=!l,r="",Object.assign({},e,{userName:r,isLogin:l});default:return e}},T=Object(_.b)(U,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(l.a.createElement(o.a,{store:T},l.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.706384c7.chunk.js.map