(window["webpackJsonpstar-war-api"]=window["webpackJsonpstar-war-api"]||[]).push([[0],{29:function(e,t,a){e.exports=a(41)},38:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(9),r=a.n(s),o=a(13),c=(a(38),a(27)),i=a(8),u=(a(39),a(10)),m=a(11),d=a(14),p=a(12),h=a(15),E="LOGIN_USER",v="LOGOUT_USER",g="ADD_MESSAGE";var f=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onLogin=function(){a.setState({message:""});var e=a.state,t=e.userName,n=e.password;fetch("https://swapi.co/api/people?search=".concat(t)).then((function(e){return e.json()})).then((function(e){var t=e.results[0];t&&t.birth_year===n?(a.props.history.push("/dashboard"),a.props.loginUser(t)):(console.log("sddas"),a.setState({message:"Invalid credentials"}))}))},a.onUserNameChange=function(e){a.setState({userName:e.target.value})},a.onPasswordChange=function(e){a.setState({password:e.target.value})},a.state={userName:"",password:"",message:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"login-page"},l.a.createElement("div",{className:"login-form"},l.a.createElement("h1",null,"Login"),l.a.createElement("input",{type:"email",placeholder:"Username",className:"text-input",value:this.state.userName,onChange:this.onUserNameChange}),l.a.createElement("input",{type:"password",placeholder:"Password",className:"text-input",value:this.state.password,onChange:this.onPasswordChange}),l.a.createElement("span",{className:"error-message"},this.state.message),l.a.createElement("button",{className:"login-button",onClick:this.onLogin},"Login")))}}]),t}(l.a.Component),N=Object(o.b)((function(e){return{}}),(function(e){return{loginUser:function(t){e(function(e){return{type:E,user:e}}(t))}}}))(f),b=a(19);var w,O=function(e){return l.a.createElement("span",{className:"planet-population"},function(e){var t=Number(e);if(isNaN(t))return e;var a=Math.floor((""+t).length/3);return parseFloat((0!==a?t/Math.pow(1e3,a):t).toPrecision(2))+" "+["","k","m","b","t"][a]}(e.population))},j=function(e){for(var t=e.value,a=parseInt(t.population),n=20,s=300;a>1e5;)a/=100,n+=4,s+=100;var r={fontSize:n+"px",fontWeight:s};return l.a.createElement("div",{className:"planet",onClick:function(){e.onPlanetClick(t)}},l.a.createElement("span",{className:"planet-title",style:r},t.name),l.a.createElement(O,{population:t.population}))},S=function(e){return r.a.createPortal(l.a.createElement("div",{className:"modal-view",onClick:function(t){"modal-view"===t.target.className&&e.onClose()}},l.a.createElement("div",{className:"modal"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("div",{className:"modal-title"},e.title),l.a.createElement("button",{className:"modal-close",onClick:e.onClose},"X")),l.a.createElement("div",{className:"modal-content"},e.children))),document.getElementById("root"))},C=function(e){var t=e.value;return l.a.createElement("div",{className:"planet-details"},l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",null,"Climate: "),t.climate),l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",null,"Diameter: "),t.diameter),l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",null,"Orbital Period: "),t.orbital_period),l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",null,"Rotation Period: "),t.rotation_period),l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",null,"Terrain: "),t.terrain),l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",null,"Surface water: "),t.surface_water),l.a.createElement("div",{className:"planet-detail"},l.a.createElement("span",null,"Gravity: "),t.gravity))},y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onTextChange=function(e){var t=e.target.value;a.setState({text:t,loading:!0}),clearTimeout(w),w=setTimeout(function(){this.onSearch()}.bind(Object(b.a)(a)),200)},a.handleKeyPress=function(e){"Enter"===e.key&&a.onSearch()},a.onSearch=function(){var e=a.state.text;e.length>0?fetch("https://swapi.co/api/planets?search=".concat(e)).then((function(e){return e.json()})).then((function(e){var t=e.results;a.setState({planets:t,loading:!1})})):a.setState({planets:[],loading:!1})},a.onModalClose=function(){a.setState({showModal:!1,selectedPlanet:{}})},a.onPlanetClick=function(e){console.log("lksjdlkajsdlajsldjlas"),a.setState({showModal:!0,selectedPlanet:e})},a.state={text:"t",planets:[],loading:!1,showModal:!1,selectedPlanet:{}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.onSearch()}},{key:"render",value:function(){var e=this,t=this.state,a=t.planets,n=t.loading,s=t.text,r=t.showModal,o=t.selectedPlanet,c=null;if(n)c=l.a.createElement("div",{className:"not-found no-result"},l.a.createElement("h1",null,"Searching planets"));else if(0===a.length)c=l.a.createElement("div",{className:"not-found no-result"},l.a.createElement("h1",null,"No results"));else{var i=a.map((function(t){return l.a.createElement(j,{key:t.name,value:t,onPlanetClick:e.onPlanetClick})}));c=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"searched-for"},"Search keyword: ",l.a.createElement("span",null,s)),l.a.createElement("div",{className:"search-results"},i))}return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"search-box"},l.a.createElement("input",{className:"search-text",type:"text",value:this.state.text,placeholder:"Search here..",onKeyPress:this.handleKeyPress,onChange:this.onTextChange}),l.a.createElement("button",{className:"search-button",onClick:this.onSearch},"Search")),l.a.createElement("div",null,c),r?l.a.createElement(S,{title:"Details",onClose:function(){return e.onModalClose()},width:500},l.a.createElement("div",{className:"planet"},l.a.createElement(j,{value:o}),l.a.createElement(C,{value:o}))):null)}}]),t}(l.a.Component),k=function(e){return l.a.createElement("header",null,l.a.createElement("h1",null,"Star Wars"),e.isLogin?l.a.createElement("div",{className:"options"},l.a.createElement("span",{className:"username"},e.user.name),l.a.createElement("button",{className:"option-button",onClick:e.onLogout},"Logout")):null)},L=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onLogout=function(){a.props.history.push("/"),a.props.onLogoutUser()},a.state={text:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k,Object.assign({},this.props,{onLogout:this.onLogout})),l.a.createElement(y,this.props))}}]),t}(l.a.Component),_=Object(o.b)((function(e){return{user:e.user,isLogin:e.isLogin}}),(function(e){return{onLogoutUser:function(){e({type:v})}}}))(L);var P=function(){return l.a.createElement("div",{className:"not-found"},l.a.createElement("h1",null,"Not Found"))};var x=function(){return l.a.createElement(c.a,{basename:"/star-war-api"},l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/",component:N}),l.a.createElement(i.a,{path:"/login",component:N}),l.a.createElement(i.a,{path:"/dashboard",component:_}),l.a.createElement(i.a,{component:P})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=a(18),M={isLogin:!1,messages:[],user:""},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:var a=e.isLogin;a=!a;var n=t.user;return Object.assign({},e,{user:n,isLogin:a});case v:var l=e.isLogin,s=e.userName;return l=!l,s="",Object.assign({},e,{userName:s,isLogin:l});case g:var r=e.messages,o=t.message;return r.push(o),Object.assign({},e,{messages:r});default:return e}},D=Object(U.b)(T,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());r.a.render(l.a.createElement(o.a,{store:D},l.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.7c56b6ae.chunk.js.map